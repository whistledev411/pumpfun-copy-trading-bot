'use strict';const a2_0x46295b=a2_0x9893;(function(_0x990a65,_0x2b90d7){const _0x3ccdae=a2_0x9893,_0x407d43=_0x990a65();while(!![]){try{const _0x199073=-parseInt(_0x3ccdae(0x150))/0x1+-parseInt(_0x3ccdae(0x171))/0x2*(parseInt(_0x3ccdae(0x174))/0x3)+parseInt(_0x3ccdae(0x13f))/0x4+-parseInt(_0x3ccdae(0x154))/0x5*(parseInt(_0x3ccdae(0x188))/0x6)+-parseInt(_0x3ccdae(0x13c))/0x7*(parseInt(_0x3ccdae(0x13b))/0x8)+-parseInt(_0x3ccdae(0x16e))/0x9+parseInt(_0x3ccdae(0x149))/0xa*(parseInt(_0x3ccdae(0x182))/0xb);if(_0x199073===_0x2b90d7)break;else _0x407d43['push'](_0x407d43['shift']());}catch(_0x13a891){_0x407d43['push'](_0x407d43['shift']());}}}(a2_0x107f,0xd69f8));function a2_0x107f(){const _0x32b78d=['add','setComputeUnitPrice','timeEnd','bn.js','lKOZR','DZBqx','getOwnPropertyDescriptor','Bonding\x20curve\x20already\x20completed','search','get','NYqDx','uMksF','@solana/spl-token','@solana/web3.js','toString','log','ZOSzN','8815581ZJcHse','apply','nSbBQ','2254814fUikAf','HVqoC','hasOwnProperty','3dgRDoF','Bonding\x20curve\x20account\x20not\x20found','__importDefault','confirmTransaction','Xhbqs','getOwnPropertyNames','default','length','PqYvr','true','create','transaction','executeJitoTx','split','11QDYhsD','SHDrO','DoFUA','accounts','VersionedTransaction','./tokenDataFromBondingCurveTokenAccBuffer','6098346QpYjgr','DuSth','getAssociatedTokenAddress','ComputeBudgetProgram','(((.+)+)+)+$','./getBondingCurvePDA','../../utils/jito','prototype','QVvCM','LAMPORTS_PER_SOL','defineProperty','../idl/pump-fun.json','2576PMvEzM','26502wimVol','Program','XWsdY','4387484RvtyxL','constructor','env','__esModule','getLatestBlockhash','fHdjb','data','mDuAd','PublicKey','silwz','53040180BSqFlj','publicKey','__importStar','sendTransaction','confirmed','gBZDm','CebN5WGQ4jvEPvsVU4EoHEpgzq1VV7AbicfhtW4xC9iM','1179394GAGllT','Wallet','AInyD','feePayer','5LATUnC','4|2|1|3|0','setComputeUnitLimit','blockhash','methods','6EF8rrecthR5Dkzon8Nwu78hRvfCKubJ14M5uBEwF6P','sign','AnchorProvider','AWImF'];a2_0x107f=function(){return _0x32b78d;};return a2_0x107f();}function a2_0x9893(_0x4e1d55,_0x15d7ee){const _0x3b4ff4=a2_0x107f();return a2_0x9893=function(_0xc594ae,_0xe89f05){_0xc594ae=_0xc594ae-0x132;let _0x107fa5=_0x3b4ff4[_0xc594ae];return _0x107fa5;},a2_0x9893(_0x4e1d55,_0x15d7ee);}var __createBinding=this&&this['__createBinding']||(Object[a2_0x46295b(0x17e)]?function(_0x163250,_0x1c1634,_0x462dc5,_0x43b183){const _0x48f8b5=a2_0x46295b,_0x462605={'dYLNA':function(_0x4f2d7e,_0x4d107b){return _0x4f2d7e in _0x4d107b;},'kmqSy':_0x48f8b5(0x166)};if(_0x43b183===undefined)_0x43b183=_0x462dc5;var _0x4e772d=Object[_0x48f8b5(0x163)](_0x1c1634,_0x462dc5);(!_0x4e772d||(_0x462605['dYLNA'](_0x462605['kmqSy'],_0x4e772d)?!_0x1c1634['__esModule']:_0x4e772d['writable']||_0x4e772d['configurable']))&&(_0x4e772d={'enumerable':!![],'get':function(){return _0x1c1634[_0x462dc5];}}),Object[_0x48f8b5(0x139)](_0x163250,_0x43b183,_0x4e772d);}:function(_0x1df355,_0x2f3b87,_0x4a1ee9,_0x28d65c){const _0x50e184=a2_0x46295b,_0x3d4aba={'ZOSzN':function(_0x3adf26,_0xefdf6b){return _0x3adf26===_0xefdf6b;}};if(_0x3d4aba[_0x50e184(0x16d)](_0x28d65c,undefined))_0x28d65c=_0x4a1ee9;_0x1df355[_0x28d65c]=_0x2f3b87[_0x4a1ee9];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a2_0x46295b(0x17e)]?function(_0x10afdd,_0x646aa3){const _0x3a6412=a2_0x46295b,_0x295868={'uMksF':_0x3a6412(0x17a)};Object[_0x3a6412(0x139)](_0x10afdd,_0x295868[_0x3a6412(0x168)],{'enumerable':!![],'value':_0x646aa3});}:function(_0x646bac,_0x2568ed){const _0xbd90d9=a2_0x46295b;_0x646bac[_0xbd90d9(0x17a)]=_0x2568ed;}),__importStar=this&&this[a2_0x46295b(0x14b)]||(function(){const _0x55dab8=a2_0x46295b,_0x2a0a22={'NYqDx':_0x55dab8(0x133),'lKOZR':_0x55dab8(0x155),'HVqoC':function(_0xd6710e,_0x5c1bdf){return _0xd6710e!=_0x5c1bdf;},'ONGkf':function(_0x1f3cf9,_0x4a0527){return _0x1f3cf9(_0x4a0527);},'mDuAd':function(_0x2e3f8b,_0x182b12){return _0x2e3f8b!==_0x182b12;},'SHDrO':function(_0x40d3ed,_0x5abf90,_0x310a02,_0x397a99){return _0x40d3ed(_0x5abf90,_0x310a02,_0x397a99);},'Xhbqs':function(_0x398225,_0x572088,_0x4763d4){return _0x398225(_0x572088,_0x4763d4);},'nSbBQ':function(_0x1d1d3c){return _0x1d1d3c();}},_0x2eeadd=(function(){let _0x5d357f=!![];return function(_0x43cf06,_0x509371){const _0x5176c=_0x5d357f?function(){const _0x98e21d=a2_0x9893;if(_0x509371){const _0x265276=_0x509371[_0x98e21d(0x16f)](_0x43cf06,arguments);return _0x509371=null,_0x265276;}}:function(){};return _0x5d357f=![],_0x5176c;};}()),_0x5ad340=_0x2a0a22[_0x55dab8(0x178)](_0x2eeadd,this,function(){const _0x8c6076=_0x55dab8;return _0x5ad340[_0x8c6076(0x16b)]()[_0x8c6076(0x165)](_0x8c6076(0x133))['toString']()[_0x8c6076(0x140)](_0x5ad340)[_0x8c6076(0x165)](_0x2a0a22[_0x8c6076(0x167)]);});_0x2a0a22[_0x55dab8(0x170)](_0x5ad340);var _0x19af3f=function(_0x434f71){const _0x392aef=_0x55dab8;return _0x19af3f=Object[_0x392aef(0x179)]||function(_0x265324){const _0x20acbb=_0x392aef;var _0x3e43cd=[];for(var _0x4c9e0e in _0x265324)if(Object[_0x20acbb(0x136)][_0x20acbb(0x173)]['call'](_0x265324,_0x4c9e0e))_0x3e43cd[_0x3e43cd[_0x20acbb(0x17b)]]=_0x4c9e0e;return _0x3e43cd;},_0x19af3f(_0x434f71);};return function(_0x5b9a5d){const _0x213ef4=_0x55dab8,_0x53a3d9=_0x2a0a22[_0x213ef4(0x161)][_0x213ef4(0x181)]('|');let _0x2c8fa6=0x0;while(!![]){switch(_0x53a3d9[_0x2c8fa6++]){case'0':return _0x32538a;case'1':if(_0x2a0a22[_0x213ef4(0x172)](_0x5b9a5d,null)){for(var _0x1cf982=_0x2a0a22['ONGkf'](_0x19af3f,_0x5b9a5d),_0xaf919b=0x0;_0xaf919b<_0x1cf982[_0x213ef4(0x17b)];_0xaf919b++)if(_0x2a0a22[_0x213ef4(0x146)](_0x1cf982[_0xaf919b],_0x213ef4(0x17a)))_0x2a0a22[_0x213ef4(0x183)](__createBinding,_0x32538a,_0x5b9a5d,_0x1cf982[_0xaf919b]);}continue;case'2':var _0x32538a={};continue;case'3':_0x2a0a22['Xhbqs'](__setModuleDefault,_0x32538a,_0x5b9a5d);continue;case'4':if(_0x5b9a5d&&_0x5b9a5d[_0x213ef4(0x142)])return _0x5b9a5d;continue;}break;}};}()),__importDefault=this&&this[a2_0x46295b(0x176)]||function(_0x2e45a4){const _0x17d487=a2_0x46295b;return _0x2e45a4&&_0x2e45a4[_0x17d487(0x142)]?_0x2e45a4:{'default':_0x2e45a4};};Object[a2_0x46295b(0x139)](exports,a2_0x46295b(0x142),{'value':!![]});const token=__importStar(require(a2_0x46295b(0x169))),web3=__importStar(require('@solana/web3.js')),getBondingCurvePDA_1=__importDefault(require(a2_0x46295b(0x134))),tokenDataFromBondingCurveTokenAccBuffer_1=__importDefault(require(a2_0x46295b(0x187))),getBuyPrice_1=__importDefault(require('./getBuyPrice')),anchor_1=require('@coral-xyz/anchor'),bn_js_1=require(a2_0x46295b(0x160)),pump_fun_json_1=__importDefault(require(a2_0x46295b(0x13a))),getBondingCurveTokenAccountWithRetry_1=__importDefault(require('./getBondingCurveTokenAccountWithRetry')),web3_js_1=require(a2_0x46295b(0x16a)),jito_1=require(a2_0x46295b(0x135)),BOANDING_CURVE_ACC_RETRY_AMOUNT=0x32,BOANDING_CURVE_ACC_RETRY_DELAY=0xa;async function buyToken(_0x2efe11,_0x504948,_0x1a885d,_0x18ddff,_0x120681,_0x459833){const _0x783c20=a2_0x46295b,_0x1c12ba={'AInyD':'processed','XWsdY':_0x783c20(0x159),'gBZDm':function(_0x5d93e9,_0x560297){return _0x5d93e9===_0x560297;},'DuSth':_0x783c20(0x175),'XUXYk':_0x783c20(0x164),'AWImF':function(_0x569fb1,_0x412451){return _0x569fb1(_0x412451);},'PqYvr':function(_0x54a57e,_0x591882){return _0x54a57e*_0x591882;},'DoFUA':function(_0x177574,_0x3e378e){return _0x177574*_0x3e378e;},'DymdY':function(_0xd12ee3,_0x1c5042){return _0xd12ee3+_0x1c5042;},'DZBqx':_0x783c20(0x14f),'fHdjb':_0x783c20(0x17d),'QVvCM':'confirmed','silwz':'ðŸš€\x20~\x20sig:'};try{const _0x3b61de=new anchor_1[(_0x783c20(0x15b))](_0x504948,new anchor_1[(_0x783c20(0x151))](_0x1a885d),{'commitment':_0x1c12ba[_0x783c20(0x152)]}),_0x47ca89=new anchor_1[(_0x783c20(0x13d))](pump_fun_json_1[_0x783c20(0x17a)],_0x3b61de),_0x4cfb2e=new web3['Transaction'](),_0x235c56=await token['getAssociatedTokenAddress'](_0x2efe11,_0x1a885d[_0x783c20(0x14a)],![]);_0x4cfb2e[_0x783c20(0x15d)](token['createAssociatedTokenAccountInstruction'](_0x1a885d[_0x783c20(0x14a)],_0x235c56,_0x1a885d['publicKey'],_0x2efe11));const _0x5d208c=new web3[(_0x783c20(0x147))](_0x1c12ba[_0x783c20(0x13e)]),_0x55fecf=(0x0,getBondingCurvePDA_1[_0x783c20(0x17a)])(_0x2efe11,_0x5d208c),_0x5d753d=await token[_0x783c20(0x18a)](_0x2efe11,_0x55fecf,!![]);console[_0x783c20(0x15f)]('2');const _0x2eb5cc=await(0x0,getBondingCurveTokenAccountWithRetry_1['default'])(_0x504948,_0x55fecf,BOANDING_CURVE_ACC_RETRY_AMOUNT,BOANDING_CURVE_ACC_RETRY_DELAY);console[_0x783c20(0x15f)]('3');if(_0x1c12ba[_0x783c20(0x14e)](_0x2eb5cc,null))throw new Error(_0x1c12ba[_0x783c20(0x189)]);const _0x550a98=(0x0,tokenDataFromBondingCurveTokenAccBuffer_1[_0x783c20(0x17a)])(_0x2eb5cc[_0x783c20(0x145)]);if(_0x550a98['complete'])throw new Error(_0x1c12ba['XUXYk']);const _0x2201da=_0x1c12ba[_0x783c20(0x15c)](BigInt,_0x1c12ba[_0x783c20(0x17c)](_0x120681,0x64)),_0x1c6ada=_0x1c12ba[_0x783c20(0x15c)](BigInt,_0x1c12ba[_0x783c20(0x184)](_0x18ddff,web3[_0x783c20(0x138)])),_0x4b3975=(0x0,getBuyPrice_1[_0x783c20(0x17a)])(_0x1c6ada,_0x550a98),_0x261c88=_0x1c12ba['DymdY'](_0x1c6ada,_0x1c6ada*_0x2201da/0x2710n),_0x2f0f63=new web3[(_0x783c20(0x147))](_0x1c12ba[_0x783c20(0x162)]),_0x5c9ed4=web3[_0x783c20(0x132)][_0x783c20(0x156)]({'units':0x927c0}),_0x5126f4=web3['ComputeBudgetProgram'][_0x783c20(0x15e)]({'microLamports':_0x1c12ba['PqYvr'](0.002,0x3b9aca00)}),_0x4d4be4=await _0x504948[_0x783c20(0x143)]();_0x4cfb2e[_0x783c20(0x15d)](_0x5c9ed4)[_0x783c20(0x15d)](_0x5126f4)[_0x783c20(0x15d)](await _0x47ca89[_0x783c20(0x158)]['buy'](new bn_js_1['BN'](_0x4b3975[_0x783c20(0x16b)]()),new bn_js_1['BN'](_0x261c88[_0x783c20(0x16b)]()))[_0x783c20(0x185)]({'feeRecipient':_0x2f0f63,'mint':_0x2efe11,'associatedBondingCurve':_0x5d753d,'associatedUser':_0x235c56,'user':_0x1a885d[_0x783c20(0x14a)]})[_0x783c20(0x17f)]()),_0x4cfb2e[_0x783c20(0x153)]=_0x1a885d['publicKey'],_0x4cfb2e['recentBlockhash']=_0x4d4be4[_0x783c20(0x157)];const _0x280798=process[_0x783c20(0x141)]['IS_JITO']===_0x1c12ba[_0x783c20(0x144)];if(_0x280798){const _0x51cf64=new web3_js_1['TransactionMessage']({'payerKey':_0x1a885d['publicKey'],'recentBlockhash':_0x4d4be4[_0x783c20(0x157)],'instructions':_0x4cfb2e['instructions']})['compileToV0Message'](),_0x2b01ce=new web3[(_0x783c20(0x186))](_0x51cf64);_0x2b01ce[_0x783c20(0x15a)]([_0x1a885d]);const _0x33a855=await(0x0,jito_1[_0x783c20(0x180)])([_0x2b01ce],_0x1a885d,_0x783c20(0x14d));return _0x33a855;}else{const _0x49a2af=await _0x504948[_0x783c20(0x14c)](_0x4cfb2e,[_0x1a885d],{'skipPreflight':!![],'preflightCommitment':'confirmed'}),_0x57b8c4=await _0x504948[_0x783c20(0x177)](_0x49a2af,_0x1c12ba[_0x783c20(0x137)]);return console[_0x783c20(0x16c)](_0x1c12ba[_0x783c20(0x148)],_0x49a2af),_0x49a2af;}}catch(_0x16e877){return console['error'](_0x16e877),![];}}exports['default']=buyToken;